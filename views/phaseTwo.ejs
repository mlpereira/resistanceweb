<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Resistance Web</title>
    <link rel="stylesheet" href="/stylesheets/index.css" />
  </head>
  <body>
    Player: <%= player.name+' ID: '+player.id+(player.isLoyal ? ' Loyal' : ' Spy') %>
    <% var mission = room.getCurrentMission(); %>
    <fieldset>
        <legend>Mission <%= room.currentMissionIndex+1 %></legend>
        <h1>TEAM PENDING APPROVAL</h1>
        <h3>Leader:</h3>
        <li><%= mission.leader.name %></li>
        <h3>Agents:</h3>
        <% for (var i=0; i<mission.agents.length; i++) { %>
          <li><%= mission.agents[i].name %></li>
        <% } %>
    </fieldset>

    <% if (mission.playerHasVoted(player)) { %>
      <h1>You <%= (mission.getPlayerVote(player)=='yes' ? 'Approved' : 'Rejected') %> this team</h1>
      <h2>Waiting other players' votes</h2>
    <% } else { %>
      <h2>Do you approve this team?</h2>
      <form action="/room/<%= room.id %>/voteTeam" %> method="post">
        <button type="submit" name="vote" value="yes">Yes</button>
        <button type="submit" name="vote" value="no">No</button>
      </form>
    <% } %>

  </body>
</html>
